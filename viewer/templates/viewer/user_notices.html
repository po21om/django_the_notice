{% extends "viewer/main.html" %}
{% block content %}
{% load pagination %}

<section class="search-header">
    <div class="search-wrapper">
    <form method="get">
    <div class="search">
        <div class="select">
        <label for="category">Category:</label>

                <select name="category" id="category">
                    <option value="">All</option>
                    {% for category in categories %}
                    <option value="{{category.id}}">{{category.name}}</option>
                    {% endfor %}
                </select>
            </div>
        <div class="select">
        <label for="type">Type:</label>

                <select name="type" id="type">
                    <option value="">All</option>
                    {% for type in types %}
                    <option value="{{type.id}}">{{type.name}}</option>
                    {% endfor %}
                </select>
            </div>
        <div class="select">
        <label for="condition">Condition:</label>

                <select name="condition" id="condition">
                    <option value="">All</option>
                    {% for condition in conditions %}
                    <option value="{{condition.id}}">{{condition.name}}</option>
                    {% endfor %}
                </select>
            </div>
        <input type="text" name="search" value="{{search_input}}" placeholder="Input search phrase...">
        <input class="button" type="submit" value="Search" />
    </div>

    </form>
    <form method="get">
        <input type="hidden" name="search" value="">
        <input class="button" type="submit" value="Show all" />

    </form>
    </div>
<div class="count">
    There are {{user_notices_count}} notice{{ user_notices_count|pluralize }} from user
{% for notice in notices_user %}
    {% if forloop.first %}
        : <b>{{ notice.user.username|title }}</b>
    {%endif%}
{%endfor%}
</div>
</section>

<section class="notice-cards">
{% for notice in notices_user %}
    <a href="{% url 'notice' notice.id %}" title="{{ notice.name|title }}">
    <div class="notice-card">
    {% if notice.image %}
        <img src="{{ notice.image.url }}" alt="image of {{ notice.name|title }}">
        {% else %}
        <img src="https://plchldr.co/i/180x180?&bg=164e87&fc=fafafa&text=Image unavailable" alt="Image unavailable">
    {% endif %}
        <h4>{{ notice.name|title|truncatechars:26 }}</h4>
    {% if notice.price %}
        <h4>${{ notice.price }}</h4>
    {% endif %}
    </div>
    </a>
{% empty %}
<h4>Nothing right now</h4>

{% endfor %}
</section>
{#pagination    #}

<section>
{% if user_paginated_notices.has_previous %}
    <a href="{% relative_url user_paginated_notices.previous_page_number 'page' request.GET.urlencode %}"><button>Previous page</button></a>
{% endif %}
{{ user_paginated_notices.number }} of {{ user_paginated_notices.paginator.num_pages }}
{% if user_paginated_notices.has_next %}
    <a href="{% relative_url user_paginated_notices.next_page_number 'page' request.GET.urlencode %}"><button>Next page</button></a>
{% endif %}
</section>

{% endblock content %}
